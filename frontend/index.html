<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Classificador de Imagens</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 2rem;
            max-width: 600px;
        }

        img {
            max-width: 100%;
            margin-top: 1rem;
            border: 1px solid #ccc;
        }

        .result {
            margin-top: 1rem;
            padding: 1rem;
            border: 1px solid #ddd;
            background: #f9f9f9;
        }
    </style>
</head>

<body>

    <h2>Classificação de Imagem</h2>

    <form id="upload-form">
        <label>Código de autorização:</label><br />
        <input type="text" id="auth-code" placeholder="Digite o código" required /><br /><br />

        <label>Selecione uma imagem:</label><br />
        <input type="file" id="image-input" accept="image/*" required /><br /><br />

        <button type="submit">Enviar</button>
    </form>

    <img id="preview" style="display: none;" />

    <div id="result" class="result"></div>
    <ol>
        <li>001.Black_footed_Albatross</li>
        <li>002.Laysan_Albatross</li>
        <li>003.Sooty_Albatross</li>
        <li>004.Groove_billed_Ani</li>
        <li>005.Crested_Auklet</li>
        <li>006.Least_Auklet</li>
        <li>007.Parakeet_Auklet</li>
        <li>008.Rhinoceros_Auklet</li>
        <li>009.Brewer_Blackbird</li>
        <li>010.Red_winged_Blackbird</li>
        <li>011.Rusty_Blackbird</li>
        <li>012.Yellow_headed_Blackbird</li>
        <li>013.Bobolink</li>
        <li>014.Indigo_Bunting</li>
        <li>015.Lazuli_Bunting</li>
        <li>016.Painted_Bunting</li>
        <li>017.Cardinal</li>
        <li>018.Spotted_Catbird</li>
        <li>019.Gray_Catbird</li>
        <li>020.Yellow_breasted_Chat</li>
        <li>021.Eastern_Towhee</li>
        <li>022.Chuck_will_Widow</li>
        <li>023.Brandt_Cormorant</li>
        <li>024.Red_faced_Cormorant</li>
        <li>025.Pelagic_Cormorant</li>
        <li>026.Bronzed_Cowbird</li>
        <li>027.Shiny_Cowbird</li>
        <li>028.Brown_Creeper</li>
        <li>029.American_Crow</li>
        <li>030.Fish_Crow</li>
        <li>031.Black_billed_Cuckoo</li>
        <li>032.Mangrove_Cuckoo</li>
        <li>033.Yellow_billed_Cuckoo</li>
        <li>034.Gray_crowned_Rosy_Finch</li>
        <li>035.Purple_Finch</li>
        <li>036.Northern_Flicker</li>
        <li>037.Acadian_Flycatcher</li>
        <li>038.Great_Crested_Flycatcher</li>
        <li>039.Least_Flycatcher</li>
        <li>040.Olive_sided_Flycatcher</li>
        <li>041.Scissor_tailed_Flycatcher</li>
        <li>042.Vermilion_Flycatcher</li>
        <li>043.Yellow_bellied_Flycatcher</li>
        <li>044.Frigatebird</li>
        <li>045.Northern_Fulmar</li>
        <li>046.Gadwall</li>
        <li>047.American_Goldfinch</li>
        <li>048.European_Goldfinch</li>
        <li>049.Boat_tailed_Grackle</li>
        <li>050.Eared_Grebe</li>
        <li>051.Horned_Grebe</li>
        <li>052.Pied_billed_Grebe</li>
        <li>053.Western_Grebe</li>
        <li>054.Blue_Grosbeak</li>
        <li>055.Evening_Grosbeak</li>
        <li>056.Pine_Grosbeak</li>
        <li>057.Rose_breasted_Grosbeak</li>
        <li>058.Pigeon_Guillemot</li>
        <li>059.California_Gull</li>
        <li>060.Glaucous_winged_Gull</li>
        <li>061.Heermann_Gull</li>
        <li>062.Herring_Gull</li>
        <li>063.Ivory_Gull</li>
        <li>064.Ring_billed_Gull</li>
        <li>065.Slaty_backed_Gull</li>
        <li>066.Western_Gull</li>
        <li>067.Anna_Hummingbird</li>
        <li>068.Ruby_throated_Hummingbird</li>
        <li>069.Rufous_Hummingbird</li>
        <li>070.Green_Violetear</li>
        <li>071.Long_tailed_Jaeger</li>
        <li>072.Pomarine_Jaeger</li>
        <li>073.Blue_Jay</li>
        <li>074.Florida_Jay</li>
        <li>075.Green_Jay</li>
        <li>076.Dark_eyed_Junco</li>
        <li>077.Tropical_Kingbird</li>
        <li>078.Gray_Kingbird</li>
        <li>079.Belted_Kingfisher</li>
        <li>080.Green_Kingfisher</li>
        <li>081.Pied_Kingfisher</li>
        <li>082.Ringed_Kingfisher</li>
        <li>083.White_breasted_Kingfisher</li>
        <li>084.Red_legged_Kittiwake</li>
        <li>085.Horned_Lark</li>
        <li>086.Pacific_Loon</li>
        <li>087.Mallard</li>
        <li>088.Western_Meadowlark</li>
        <li>089.Hooded_Merganser</li>
        <li>090.Red_breasted_Merganser</li>
        <li>091.Mockingbird</li>
        <li>092.Nighthawk</li>
        <li>093.Clark_Nutcracker</li>
        <li>094.White_breasted_Nuthatch</li>
        <li>095.Baltimore_Oriole</li>
        <li>096.Hooded_Oriole</li>
        <li>097.Orchard_Oriole</li>
        <li>098.Scott_Oriole</li>
        <li>099.Ovenbird</li>
        <li>100.Brown_Pelican</li>
        <li>101.White_Pelican</li>
        <li>102.Western_Wood_Pewee</li>
        <li>103.Sayornis</li>
        <li>104.American_Pipit</li>
        <li>105.Whip_poor_Will</li>
        <li>106.Horned_Puffin</li>
        <li>107.Common_Raven</li>
        <li>108.White_necked_Raven</li>
        <li>109.American_Redstart</li>
        <li>110.Geococcyx</li>
        <li>111.Loggerhead_Shrike</li>
        <li>112.Great_Grey_Shrike</li>
        <li>113.Baird_Sparrow</li>
        <li>114.Black_throated_Sparrow</li>
        <li>115.Brewer_Sparrow</li>
        <li>116.Chipping_Sparrow</li>
        <li>117.Clay_colored_Sparrow</li>
        <li>118.House_Sparrow</li>
        <li>119.Field_Sparrow</li>
        <li>120.Fox_Sparrow</li>
        <li>121.Grasshopper_Sparrow</li>
        <li>122.Harris_Sparrow</li>
        <li>123.Henslow_Sparrow</li>
        <li>124.Le_Conte_Sparrow</li>
        <li>125.Lincoln_Sparrow</li>
        <li>126.Nelson_Sharp_tailed_Sparrow</li>
        <li>127.Savannah_Sparrow</li>
        <li>128.Seaside_Sparrow</li>
        <li>129.Song_Sparrow</li>
        <li>130.Tree_Sparrow</li>
        <li>131.Vesper_Sparrow</li>
        <li>132.White_crowned_Sparrow</li>
        <li>133.White_throated_Sparrow</li>
        <li>134.Cape_Glossy_Starling</li>
        <li>135.Bank_Swallow</li>
        <li>136.Barn_Swallow</li>
        <li>137.Cliff_Swallow</li>
        <li>138.Tree_Swallow</li>
        <li>139.Scarlet_Tanager</li>
        <li>140.Summer_Tanager</li>
        <li>141.Artic_Tern</li>
        <li>142.Black_Tern</li>
        <li>143.Caspian_Tern</li>
        <li>144.Common_Tern</li>
        <li>145.Elegant_Tern</li>
        <li>146.Forsters_Tern</li>
        <li>147.Least_Tern</li>
        <li>148.Green_tailed_Towhee</li>
        <li>149.Brown_Thrasher</li>
        <li>150.Sage_Thrasher</li>
        <li>151.Black_capped_Vireo</li>
        <li>152.Blue_headed_Vireo</li>
        <li>153.Philadelphia_Vireo</li>
        <li>154.Red_eyed_Vireo</li>
        <li>155.Warbling_Vireo</li>
        <li>156.White_eyed_Vireo</li>
        <li>157.Yellow_throated_Vireo</li>
        <li>158.Bay_breasted_Warbler</li>
        <li>159.Black_and_white_Warbler</li>
        <li>160.Black_throated_Blue_Warbler</li>
        <li>161.Blue_winged_Warbler</li>
        <li>162.Canada_Warbler</li>
        <li>163.Cape_May_Warbler</li>
        <li>164.Cerulean_Warbler</li>
        <li>165.Chestnut_sided_Warbler</li>
        <li>166.Golden_winged_Warbler</li>
        <li>167.Hooded_Warbler</li>
        <li>168.Kentucky_Warbler</li>
        <li>169.Magnolia_Warbler</li>
        <li>170.Mourning_Warbler</li>
        <li>171.Myrtle_Warbler</li>
        <li>172.Nashville_Warbler</li>
        <li>173.Orange_crowned_Warbler</li>
        <li>174.Palm_Warbler</li>
        <li>175.Pine_Warbler</li>
        <li>176.Prairie_Warbler</li>
        <li>177.Prothonotary_Warbler</li>
        <li>178.Swainson_Warbler</li>
        <li>179.Tennessee_Warbler</li>
        <li>180.Wilson_Warbler</li>
        <li>181.Worm_eating_Warbler</li>
        <li>182.Yellow_Warbler</li>
        <li>183.Northern_Waterthrush</li>
        <li>184.Louisiana_Waterthrush</li>
        <li>185.Bohemian_Waxwing</li>
        <li>186.Cedar_Waxwing</li>
        <li>187.American_Three_toed_Woodpecker</li>
        <li>188.Pileated_Woodpecker</li>
        <li>189.Red_bellied_Woodpecker</li>
        <li>190.Red_cockaded_Woodpecker</li>
        <li>191.Red_headed_Woodpecker</li>
        <li>192.Downy_Woodpecker</li>
        <li>193.Bewick_Wren</li>
        <li>194.Cactus_Wren</li>
        <li>195.Carolina_Wren</li>
        <li>196.House_Wren</li>
        <li>197.Marsh_Wren</li>
        <li>198.Rock_Wren</li>
        <li>199.Winter_Wren</li>
        <li>200.Common_Yellowthroat</li>
    </ol>

    <script>
        const form = document.getElementById('upload-form');
        const imageInput = document.getElementById('image-input');
        const codeInput = document.getElementById('auth-code');
        const resultDiv = document.getElementById('result');
        const previewImg = document.getElementById('preview');

        imageInput.addEventListener('change', () => {
            const file = imageInput.files[0];
            if (file) {
                previewImg.src = URL.createObjectURL(file);
                previewImg.style.display = 'block';
            }
        });

        form.addEventListener('submit', async (e) => {
            e.preventDefault();

            const file = imageInput.files[0];
            const code = codeInput.value;

            if (!file || !code) {
                alert("Preencha todos os campos.");
                return;
            }

            const formData = new FormData();
            formData.append('file', file);

            resultDiv.innerHTML = "Enviando...";

            try {
                const response = await fetch(`https://api.dattaflow.com/predict?code=${code}`, {
                    method: 'POST',
                    body: formData
                });

                if (!response.ok) {
                    const error = await response.json();
                    throw new Error(error.detail || "Erro na requisição");
                }

                const data = await response.json();
                resultDiv.innerHTML = `
          <p><strong>Classe:</strong> ${data.class_name}</p>
          <p><strong>ID:</strong> ${data.class_id}</p>
          <p><strong>Confiança:</strong> ${(data.confidence * 100).toFixed(2)}%</p>
        `;
            } catch (err) {
                resultDiv.innerHTML = `<p style="color:red;">Erro: ${err.message}</p>`;
            }
        });
    </script>

</body>

</html>